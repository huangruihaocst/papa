From a495738a1281cbfa68bf51c43d620fcec3052808 Mon Sep 17 00:00:00 2001
From: Alex Wang <ice_b0und@hotmail.com>
Date: Sat, 24 Oct 2015 00:08:18 +0800
Subject: [PATCH 128/150] fix course without semester bug

---
 app/views/courses/show.json.jbuilder | 1 +
 db/init_data/db.rb                   | 2 ++
 2 files changed, 3 insertions(+)

diff --git a/app/views/courses/show.json.jbuilder b/app/views/courses/show.json.jbuilder
index 4cc2bf1..befafd1 100644
--- a/app/views/courses/show.json.jbuilder
+++ b/app/views/courses/show.json.jbuilder
@@ -3,4 +3,5 @@ json.status STATUS_SUCCESS
 json.course do
   json.id     @course.id
   json.name   @course.name
+  json.semester_id @course.semester_id
 end
diff --git a/db/init_data/db.rb b/db/init_data/db.rb
index 8ba0781..8c3debe 100644
--- a/db/init_data/db.rb
+++ b/db/init_data/db.rb
@@ -1,4 +1,6 @@
 s = Semester.create(name: '2015')
+s1 = Semester.create(name: '2014')
+s2 = Semester.create(name: '2013')
 
 c1 = Course.create(name: 'os', description: '123', semester_id: s.id)
 l1 = c1.lessons.create(name: 'os-l1', start_time: Time.now, end_time: Time.now + 100.years, location: '5201')
-- 
1.9.1

