From 1d70cad74bffc879a742a88c4279dc8b55621a35 Mon Sep 17 00:00:00 2001
From: Alex Wang <ice_b0und@hotmail.com>
Date: Sun, 11 Oct 2015 21:19:22 +0800
Subject: [PATCH 068/150] make up

---
 app/controllers/users_controller.rb | 9 +++++++++
 config/routes.rb                    | 3 ++-
 2 files changed, 11 insertions(+), 1 deletion(-)

diff --git a/app/controllers/users_controller.rb b/app/controllers/users_controller.rb
index e69de29..b84bd8e 100644
--- a/app/controllers/users_controller.rb
+++ b/app/controllers/users_controller.rb
@@ -0,0 +1,9 @@
+class UsersController < ApplicationController
+  def current
+    if current_user
+      render json: { status: STATUS_SUCCESS, id: current_user.id.to_s }
+    else
+      json_failed
+    end
+  end
+end
\ No newline at end of file
diff --git a/config/routes.rb b/config/routes.rb
index 9acd08b..4568d2c 100644
--- a/config/routes.rb
+++ b/config/routes.rb
@@ -5,6 +5,8 @@ Rails.application.routes.draw do
     registrations: 'users/registrations'
   }
 
+  get 'users/current_user.json' => 'users#current'
+
   resources :semesters, only: [:index, :create, :update, :delete] do
     resources :courses, only: [:index]
     get 'default' => 'semesters#default'
@@ -57,7 +59,6 @@ Rails.application.routes.draw do
     post 'current_version.json' => 'android_apps#current_version'
   end
 
-
   get 'test' => 'test#index'
   get 'manage' => 'manage#main_page'
   get 'manage/MainPage' => 'manage#main_page'
-- 
1.9.1

