From 4fc374d945ac1d34712ad8bd856f3789e4764504 Mon Sep 17 00:00:00 2001
From: sleepy_chord <sj702d5@foxmail.com>
Date: Tue, 20 Oct 2015 14:18:06 +0800
Subject: [PATCH 109/150] PAPA-136 .

---
 app/controllers/files_controller.rb           | 2 +-
 app/views/manage/student_lesson_info.html.erb | 2 +-
 app/views/test/index.html.erb                 | 5 +++--
 3 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/app/controllers/files_controller.rb b/app/controllers/files_controller.rb
index 89e974b..691b832 100644
--- a/app/controllers/files_controller.rb
+++ b/app/controllers/files_controller.rb
@@ -1,5 +1,5 @@
 class FilesController < ApplicationController
-
+  FILE_MAX_SIZE=10000000
   # GET /students/1/lessons/1/files.json
   # GET /assistants/1/lessons/1/files.json
   # GET /lessons/1/files.json
diff --git a/app/views/manage/student_lesson_info.html.erb b/app/views/manage/student_lesson_info.html.erb
index f86f05c..6c5adab 100644
--- a/app/views/manage/student_lesson_info.html.erb
+++ b/app/views/manage/student_lesson_info.html.erb
@@ -93,7 +93,7 @@
           console.log(data.lesson_comments)
       });
       // test case 
-      $.get("/students/<%=@student.id %>/files.json",{},
+      $.get("/students/<%=@student.id %>/lessons/<%=@lesson.id %>/files.json",{},
       function(d){
           console.log(d);
           data= d.files;
diff --git a/app/views/test/index.html.erb b/app/views/test/index.html.erb
index b91595e..e8dd517 100644
--- a/app/views/test/index.html.erb
+++ b/app/views/test/index.html.erb
@@ -1,7 +1,8 @@
-<form action="/files.json" method="post" enctype="multipart/form-data">
+<form action="/students/1/lessons/1/files.json" method="post" enctype="multipart/form-data">
   <input type="file" name="file[file]">
   <label>name
-  <input type="text" name="name">
+  <input type="text" name="file[name]">
   </label>
+  <label>type<input name="file[type]" type="text"></label>
   <button type="submit" >submit</button>
 </form>
-- 
1.9.1

