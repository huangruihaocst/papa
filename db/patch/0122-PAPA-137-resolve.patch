From 477d866f5cf27b1fb6cb155afe2df4c3b2655f34 Mon Sep 17 00:00:00 2001
From: Sleepy_chord <sj702d5@foxmail.com>
Date: Fri, 23 Oct 2015 16:34:02 +0800
Subject: [PATCH 122/150] PAPA-137 resolve

---
 .DS_Store                                     | Bin 8196 -> 8196 bytes
 app/views/manage/student_lesson_info.html.erb |  13 ++++++++++---
 config/.DS_Store                              | Bin 0 -> 6148 bytes
 config/routes.rb                              |   1 -
 4 files changed, 10 insertions(+), 4 deletions(-)
 create mode 100644 config/.DS_Store

diff --git a/.DS_Store b/.DS_Store
index 2365a047ffcd802a26ed58956bf238da9b7ab00b..53de77f3a46943921aa1365f4a6d7da462dca46c 100644
GIT binary patch
delta 88
zcmZp1XmOa}&nUJrU^hRb*k&Gqsf-c~3=Ay){{u+|1~!IdhJ1!RhBSsuhV;#Eg}4~S
hkp#+ui}G^v^U{F|88@#K)MeewF7b_J^BG}wW&rH47Y6_U

delta 51
zcmZp1XmOa}&nU7nU^hRb$Yvgasf--|!GM8b^DQA=){PB@jGNgdzOii96T8W{u|ba!
E01Pt|^#A|>

diff --git a/app/views/manage/student_lesson_info.html.erb b/app/views/manage/student_lesson_info.html.erb
index 22bb875..3729119 100644
--- a/app/views/manage/student_lesson_info.html.erb
+++ b/app/views/manage/student_lesson_info.html.erb
@@ -94,12 +94,19 @@
       // test case 
       $.get("/students/<%=@student.id %>/lessons/<%=@lesson.id %>/files.json",{},
       function(d){
-          console.log(d);
-          data= d.files;
+          var data=[];
+          for(var i in d.files)
+              $.ajax({
+                  url:"/files/"+ d.files[i].id.toString()+".json",
+                  async: false,
+                  type: 'GET',
+                  success :function(ret){ console.log(ret);data[i]= ret.file; }
+              });
           str="";
+          console.log(data);
           for(var i in data)
           {
-              str+="<span class='label label-default' style='margin-right: 10px;font-size: 16px'>"+data[i].path+"</span>";
+              str+="<span class='label label-default' style='margin-right: 10px;font-size: 16px'>"+data[i].name+"</span>";
               str+="<button class='btn btn-sm btn-primary' onclick=changeVideo("+i.toString()+
               ")><span class='glyphicon glyphicon-play'></span>Play</button><hr>";
           }
diff --git a/config/.DS_Store b/config/.DS_Store
new file mode 100644
index 0000000000000000000000000000000000000000..1742f7c3585ba09473794803976ec08c75b6df6d
GIT binary patch
literal 6148
zcmeHK!A`<J5PgdzKp=#p#~wYI_y-L^6R-LMw!nd;wx)=Qp86Sllpo;V;G5YEwxwK+
zF*9WLZMX9}%-c=33&72Hs~cbjU`QA2jo5UU+!sHwUKkOc(`Rh3M1ogrP@F{Dz+Y5A
z=5ES4d*LtRy#35yj%$=i@3Uf=W<|<4StNJ#tAiSQzyK-dy5O95MSr%UCs^tFNXSaC
z#hR>lJR@snaStutl#w~!`2R}g%E^%H&YbS6#hsktZksu^vVE<x3A5#NS<Q)R^T8*T
zX!E4TI&Z+(LUqg---_1C>d_;uXvZv!?b1-|*)xYb9M}S5)on@Mnk?aTC@9sqVXYda
zT4M^B0;WJvfP1#saO}}qQ@|831&#{H`yrwW#sMpj`s!e#M*w1<!)olyXQFVTfN{Xe
zBk$0hrxHEYg(HUZbdE<ME)H0E^mMpz_;4Y!3nvt(+4=lP!{K6&)|vvQKvRJWe>s!=
z|MvX(ze%zyQ@|AXR|>fP;&Cx&Nnvk2DNgp<i2g(uleo&`k;0B{#f+7$_>!*1@klzv
UIAG<GBQ*OEP#LT-1%6e5Zz`9Iw*UYD

literal 0
HcmV?d00001

diff --git a/config/routes.rb b/config/routes.rb
index 729c284..ff6085c 100644
--- a/config/routes.rb
+++ b/config/routes.rb
@@ -19,7 +19,6 @@ Rails.application.routes.draw do
   resources :courses, only: [:show, :update, :destroy] do
     resources :students, only: [:index, :destroy]
     post 'students/:id' => 'students#create', as: :create_student
-    post 'teachers/:id' => 'teachers#create', as: :create_teacher
 
     resources :assistants, only: [:index, :create, :destroy]
     post 'assistants/:id' => 'assistants#create', as: :create_assistant
-- 
1.9.1

