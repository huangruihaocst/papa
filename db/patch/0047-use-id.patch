From 8fddfe9d02f59545650e78620bb1a0db09d4f435 Mon Sep 17 00:00:00 2001
From: sleepy_chord <sj702d5@foxmail.com>
Date: Fri, 9 Oct 2015 17:12:02 +0800
Subject: [PATCH 047/150] use id

---
 app/controllers/manage_controller.rb   | 33 +++++++---------
 app/views/manage/course_score.html.erb |  2 +-
 app/views/manage/index.html.erb        |  1 +
 app/views/manage/show_photos.html.erb  |  2 +-
 app/views/manage/show_videos.html.erb  | 69 ----------------------------------
 config/routes.rb                       | 15 +++-----
 6 files changed, 23 insertions(+), 99 deletions(-)

diff --git a/app/controllers/manage_controller.rb b/app/controllers/manage_controller.rb
index ac2fe0e..20a2c37 100644
--- a/app/controllers/manage_controller.rb
+++ b/app/controllers/manage_controller.rb
@@ -3,25 +3,25 @@ class ManageController < ApplicationController
   #before_action :authenticate_user!
   def index
   end
-  def MainPage
+  def main_page
   end
-  def CourseScore
+  def course_score
+    @id= params[:id]
   end
-  def ClassScore
+  def class_score
+    @id= params[:id]
   end
-  def CourseInfo
+  def course_info
+    @id= params[:id]
   end
-  def StudentInfo
+  def class_info
+    @id= params[:id]
   end
-  def ClassInfo
+  def show_photos
+    @id= params[:id]
   end
-  def ShowPhotos
-  end
-  def ShowVideos
-  end
-  def GetUserCoursesById
-    reqId=params[:id]
-    render :json => User.find(reqId).courses.to_json
+  def show_videos
+    @id= params[:id]
   end
   def AddCourseToCurrentUser
     if(user_signed_in?)
@@ -37,10 +37,5 @@ class ManageController < ApplicationController
       render :text => "fail"
     end
   end
-  def GetCourseLessonsById
-    render :json => Course.find(params[:id]).lessons.to_json
-  end
-  def AddLessonToCourseById
-    #---need to modify routes.rb
-  end
+
 end
diff --git a/app/views/manage/course_score.html.erb b/app/views/manage/course_score.html.erb
index 042330f..45833a6 100644
--- a/app/views/manage/course_score.html.erb
+++ b/app/views/manage/course_score.html.erb
@@ -15,7 +15,7 @@
 	</script>
 </head>
 <body>
-	<div id="content">	
+	<div id="content">
 	</div>
 	<script>
 		var n,m,info,items,courseInfo,lastChoose=-1,p=0,focusi=-1,focusj=-1;
diff --git a/app/views/manage/index.html.erb b/app/views/manage/index.html.erb
index 2b304c9..2b54199 100644
--- a/app/views/manage/index.html.erb
+++ b/app/views/manage/index.html.erb
@@ -1,2 +1,3 @@
 
 <input class="btn btn-info" type="button" value="test"/>
+<%= @data%>
\ No newline at end of file
diff --git a/app/views/manage/show_photos.html.erb b/app/views/manage/show_photos.html.erb
index 2552e2a..0b1a96a 100644
--- a/app/views/manage/show_photos.html.erb
+++ b/app/views/manage/show_photos.html.erb
@@ -4,7 +4,7 @@
 		{
 			padding-left:20%;
 			padding-right:20%;
-			padding-top:3%:
+			padding-top:3%;
 		}
 		#content1
 		{
diff --git a/app/views/manage/show_videos.html.erb b/app/views/manage/show_videos.html.erb
index 2552e2a..e69de29 100644
--- a/app/views/manage/show_videos.html.erb
+++ b/app/views/manage/show_videos.html.erb
@@ -1,69 +0,0 @@
-<head>
-	<style type="text/css">
-		#content
-		{
-			padding-left:20%;
-			padding-right:20%;
-			padding-top:3%:
-		}
-		#content1
-		{
-			width:100%;
-			height:60px;
-			font-size:40px;
-			margin-top:30px;
-			margin-bottom:10px;
-			text-align:left;
-		}
-		#content2
-		{
-			font-size:25px;
-			text-align:left;
-		}
-		#photos
-		{
-			margin-top:20px;
-		}
-		.photo
-		{
-			margin-top:15px;
-		}
-	</style>
-</head>
-<body>
-	<script type="text/javascript" src="/chart.js"></script>
-	<div id="content">
-		<div id="content1">
-			学生信息
-		</div>
-		<div id="content2">
-		</div>
-		<div id="photos">
-		</div>
-	</div>
-	<script>
-		var n,studentInfo,photos;
-		function loadInfo()
-		{
-			n=2;
-			studentInfo="xxx";
-			photos=new Array();
-			photos[0]="/photos/1.jpg";
-			photos[1]="/photos/2.jpg";
-		}
-		
-		function showInfo()
-		{
-			var text="",i;
-			$("#content2")[0].innerHTML=studentInfo;
-			for (i=0;i<n;++i)
-			{
-				text+='<div class="photo"><img src="'+photos[i]+'" class="img-responsive"></img></div>';
-			}
-			$("#photos")[0].innerHTML=text;
-		}
-		
-		loadInfo();
-		showInfo();
-	</script>
-</body>
diff --git a/config/routes.rb b/config/routes.rb
index 959c84a..bdbde9f 100644
--- a/config/routes.rb
+++ b/config/routes.rb
@@ -14,17 +14,14 @@ Rails.application.routes.draw do
   # Example of regular route:
   #   get 'products/:id' => 'catalog#view'
   get 'test' => 'test#index'
-  get 'manage' => 'manage#main_page'
+  get 'manage' => 'manage#index'
   get 'manage/MainPage' => 'manage#main_page'
-  get 'manage/CourseScore' => 'manage#course_score'
-  get 'manage/ClassScore' => 'manage#class_score'
-  get 'manage/CourseInfo' => 'manage#course_info'
-  get 'manage/ShowPhotos' => 'manage#show_photos'
-  get 'manage/ShowVideos' => 'manage#show_videos'
-
-  get 'manage/GetUserCoursesById/:id' => 'manage#GetUserCoursesById'
+  get 'manage/CourseScore/:id' => 'manage#course_score'
+  get 'manage/ClassScore/:id' => 'manage#class_score'
+  get 'manage/CourseInfo/:id' => 'manage#course_info'
+  get 'manage/ShowPhotos/:id' => 'manage#show_photos'
+  get 'manage/ShowVideos/:id' => 'manage#show_videos'
   post 'manage/AddCourseToCurrentUser' => 'manage#AddCourseToCurrentUser'
-  get 'manage/GetCourseLessonsById/:id' => 'manage#GetCourseLessonsById'
   # Example of named route that can be invoked with purchase_url(id: product.id)
   #   get 'products/:id/purchase' => 'catalog#purchase', as: :purchase
 
-- 
1.9.1

