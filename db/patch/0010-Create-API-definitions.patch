From b1e35fdeb61a0795663d4142771e6a7b0b6a042b Mon Sep 17 00:00:00 2001
From: Alex Wang <ice_b0und@hotmail.com>
Date: Sun, 27 Sep 2015 17:36:53 +0800
Subject: [PATCH 010/150] Create API definitions

---
 .gitignore                    |  2 ++
 README.md                     | 42 ++++++++++++++++++++++++++++++++++++++++++
 config/initializers/devise.rb |  2 +-
 3 files changed, 45 insertions(+), 1 deletion(-)

diff --git a/.gitignore b/.gitignore
index 050c9d9..ae0c577 100644
--- a/.gitignore
+++ b/.gitignore
@@ -15,3 +15,5 @@
 /log/*
 !/log/.keep
 /tmp
+
+/.idea
\ No newline at end of file
diff --git a/README.md b/README.md
index 07d8f45..70c4902 100644
--- a/README.md
+++ b/README.md
@@ -56,6 +56,48 @@ and nginx configuration file:
 ##Database schema
 I'm busy...
 
+##APIs Usage
+Step1.  Token authentication
+    POST    xxx
+
+Step2.  Get data from these URIs
+
+    # for courses
+    GET /api/courses
+    GET /api/courses/1/lessons/lesson_name
+        returns lesson_id
+    
+    # for lessons
+    GET /api/lessons
+    GET /api/lessons/1
+    GET /api/lessons/lesson_full_name
+        return lesson_id
+    GET /api/lessons/1/students
+        return student_ids
+    
+    # for participants
+    GET /api/participants
+    GET /api/participants/1
+    GET /api/participants/alex
+        returns participant_id
+    GET /api/participants/1/lessons
+        returns lesson_ids
+        
+or in rails way
+    
+    [Ruby code]
+    namespace :api do
+        resources :courses do 
+            resources :lessons
+        end
+        resources :lessons do
+            resources :students
+        end
+        resources :students do
+            resources :lessons
+        end
+    end
+
 ##TODO
 1.  Database Schema
 1.  Unit Test
diff --git a/config/initializers/devise.rb b/config/initializers/devise.rb
index 03b7d1e..c6cd874 100644
--- a/config/initializers/devise.rb
+++ b/config/initializers/devise.rb
@@ -31,7 +31,7 @@ Devise.setup do |config|
   # session. If you need permissions, you should implement that in a before filter.
   # You can also supply a hash where the value is a boolean determining whether
   # or not authentication should be aborted when the value is not present.
-  config.authentication_keys = [:phone]
+  config.authentication_keys = [:email]
 
   # Configure parameters from the request object used for authentication. Each entry
   # given should be a request method and it will automatically be passed to the
-- 
1.9.1

