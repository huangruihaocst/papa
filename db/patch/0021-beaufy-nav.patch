From d3dc3c26ce290e598aaf6827aa9b2213c00109b8 Mon Sep 17 00:00:00 2001
From: sleepy_chord <sj702d5@foxmail.com>
Date: Fri, 2 Oct 2015 18:43:26 +0800
Subject: [PATCH 021/150] beaufy nav

---
 app/controllers/manage_controller.rb     |  1 +
 app/views/layouts/main.html.erb          | 11 +++++++++++
 app/views/manage/_navigationbar.html.erb | 23 ++++++++++++++---------
 app/views/test/_footbar.html.erb         |  2 +-
 4 files changed, 27 insertions(+), 10 deletions(-)

diff --git a/app/controllers/manage_controller.rb b/app/controllers/manage_controller.rb
index 9722b5d..3228347 100644
--- a/app/controllers/manage_controller.rb
+++ b/app/controllers/manage_controller.rb
@@ -1,5 +1,6 @@
 class ManageController < ApplicationController
   layout "main"
+  #before_action :authenticate_user!
   def index
   end
 end
diff --git a/app/views/layouts/main.html.erb b/app/views/layouts/main.html.erb
index 423f761..ed1b01f 100644
--- a/app/views/layouts/main.html.erb
+++ b/app/views/layouts/main.html.erb
@@ -8,7 +8,18 @@
 </head>
 <body>
 <%= render :partial => "navigationbar" %>
+<div id="MainContent" style="text-align: center">
 <%= yield %>
+</div>
 <%= render :partial => "footbar"%>
 </body>
+<script>
+    (function (){
+        <% if user_signed_in?%>
+        $("#user_name").html("<%= current_user.email %>");
+        <%else%>
+        $("#MainContent").load("/users/sign_in");
+        <%end%>
+    })();
+</script>
 </html>
diff --git a/app/views/manage/_navigationbar.html.erb b/app/views/manage/_navigationbar.html.erb
index 400dcc1..3e4eb45 100644
--- a/app/views/manage/_navigationbar.html.erb
+++ b/app/views/manage/_navigationbar.html.erb
@@ -1,9 +1,14 @@
-<div class="header"
-     style="margin-left: 10%;margin-right: 10%;margin-top: 3ch;">
-  <div class="row">
-    <ul class="nav nav-tabs" style="padding-bottom: 2ch">
-        <li><span>网络原理实验管理系统</span></li>
-        <li class="pull-right"><button class="pull-right btn btn-primary">Sign in</button></li>
-    </ul>
-  </div>
-</div>
\ No newline at end of file
+<nav class="nav navbar-inverse" role="navigation"
+     style="padding-left: 5%;padding-right: 5%;">
+    <div class="row">
+      <div class="navbar-header">
+        <a class="navbar-brand" href="">网络原理实验管理系统</a>
+      </div>
+      <ul class="nav navbar-nav pull-right">
+          <li class="user_msg"><a id="user_name">name</a></li>
+          <li class="user_msg">
+              <a >Sign out</a>
+            </li>
+      </ul>
+    </div>
+</nav>
diff --git a/app/views/test/_footbar.html.erb b/app/views/test/_footbar.html.erb
index 41685a6..151454d 100644
--- a/app/views/test/_footbar.html.erb
+++ b/app/views/test/_footbar.html.erb
@@ -2,4 +2,4 @@
   <div style="text-align: center">
     <p>如果发现任何问题，请联系邮箱 dm14@mails.tsinghua.edu.cn</p>
   </div>
-  </div>
\ No newline at end of file
+  </div>
-- 
1.9.1

